% =============================================================================
% 11_execution_algorithms.tex
% =============================================================================
% Sources: Johnson Ch.12-15; Lehalle Ch.9; Cartea Ch.7
% =============================================================================

\subsection{Execution Algorithms}

\subsubsection{Algorithmic Trading Overview}
% Introduction to execution algorithms
% - Motivation and benefits
% - Algorithm categories
% - Build vs. buy decisions
% - Performance measurement
% Sources: Johnson Ch.12; Lehalle Ch.9

Although there are many variations of trading algorithms, stripping away customisations reveals a small set of core strategies commonly provided by most brokers and vendors. Understanding how these algorithms are categorised helps in selecting the appropriate execution strategy for different trading objectives.

\begin{remark} \hlt{Classification by Benchmark Usage}\\
One classification approach is based on the benchmarks algorithms target:
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Pre-determined benchmark: target fixed in advance (e.g., decision price for Implementation Shortfall)
\item Dynamic benchmark: target adjusts with market conditions (e.g., intraday volume profile for VWAP)
\item Forward-looking benchmark: aims to match a future price (e.g., Market-on-Close seeks the closing price)
\end{enumerate}
\end{remark}

\begin{remark} \hlt{Classification by Fundamental Mechanisms}\\
\cite{domowitz2005} describe algorithm types as a continuum ranging from unstructured strategies (e.g., liquidity seeking) to highly structured approaches (e.g., VWAP). \cite{yang2006} extend this by splitting the continuum into three main categories based on trader objectives:
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Schedule-driven: follow a strictly defined trading trajectory, generally created statically from historical data. For instance, VWAP algorithms use historical intraday volume profiles as templates for order slicing over time. These algorithms are purely schedule-driven at the macro level.
\item Evaluative: represent the middle ground, combining aspects of each approach. At the macro level they may behave in a schedule-driven fashion, whilst at the micro-level they focus on balancing the trade-off between cost and risk. Implementation Shortfall algorithms are good fits for this category.
\item Opportunistic: completely dynamic, reacting to favourable market conditions and trading more aggressively to take advantage of them. When conditions become less favourable, they trade more passively, if at all. Liquidity-seeking algorithms fit this category.
\end{enumerate}
\end{remark}

\begin{remark} \hlt{Classification by Implementation Goals}\\
A slightly modified scheme focuses on how traders make decisions based on objectives.
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Impact-driven: aim to minimise overall market impact by reducing effect trading has on asset price. Large orders are split into smaller ones and traded over longer periods. VWAP is the archetypal example.
\item Cost-driven: reduce overall trading costs, accounting for market impact, timing risk, and price trends. Implementation Shortfall most commonly used, serving as an important performance benchmark.
\item Opportunistic: Take advantage whenever market conditions are favourable, typically being price or liquidity-driven, or involving pair/spread trading. i.e., Price Inline and Liquidity-driven algorithms.
\end{enumerate}
\end{remark}

\begin{remark} \hlt{Algorithm Sensitivity Factors}\\
Different algorithm types exhibit varying sensitivities to market factors:
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Pre-determined benchmark: TWAP, VWAP, POV algorithms
\item Price sensitivity: Implementation Shortfall, Adaptive Shortfall, Price Inline algorithms
\item Volume sensitivity: POV, Adaptive Shortfall, and opportunistic strategies
\end{enumerate}
\end{remark}

\begin{table}[h]
\centering
\caption{Algorithm Classification by Implementation Goals}
\label{tab:algo_classification}
\begin{tabular}{|l|l|l|c|c|c|c|}
\hline
\textbf{Type} & \textbf{Key Focus} & \textbf{Algorithms} & \multicolumn{2}{c|}{\textbf{Benchmark}} & \multicolumn{2}{c|}{\textbf{Sensitivity}} \\
\cline{4-7}
 &  &  & Dynamic & Pre-det. & Price & Volume \\
\hline
\multirow{4}{*}{\begin{tabular}[c]{@{}l@{}}Impact-driven\end{tabular}} 
 & Time & TWAP & \checkmark &  &  & \\
\cline{2-7}
 & \multirow{2}{*}{Volume} & VWAP & \checkmark &  &  & \\
\cline{3-7}
 &  & POV &  & \checkmark &  & $\bullet$ \\
\cline{2-7}
 & Impact & Minimal Impact & \checkmark &  & $\circ$ & $\circ$ \\
\hline
\multirow{3}{*}{\begin{tabular}[c]{@{}l@{}}Cost-driven\end{tabular}} 
 & \multirow{3}{*}{Price/Risk} & Implementation Shortfall &  & \checkmark & $\circ$ & $\circ$ \\
\cline{3-7}
 &  & Adaptive Shortfall &  & \checkmark & $\bullet$ & $\circ$ \\
\cline{3-7}
 &  & Market On Close & \checkmark &  & $\circ$ & $\circ$ \\
\hline
\multirow{3}{*}{Opportunistic} 
 & Price & Price Inline &  & \checkmark & $\bullet$ & $\circ$ \\
\cline{2-7}
 & Liquidity & Liquidity-driven &  & \checkmark & $\circ$ & $\circ$ \\
\cline{2-7}
 & Ratio/Spread & Pair/Spread trading &  & \checkmark & $\bullet$ & \\
\hline
\end{tabular}
\vspace{0.2cm}

\small{$\bullet$ = often sensitive, $\circ$ = sometimes sensitive}
\end{table}

\begin{remark} \hlt{Common Algorithm Parameters}
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Specific parameters: Used to specify algorithm-specific behaviour. For example, how much a VWAP algorithm may deviate from the historical volume profile, or the participation required for a POV algorithm.
\item Generic parameters: Common details, i.e., when to start and stop, whether to enforce a limit price cap.
\end{enumerate}
\end{remark}

\begin{remark} \hlt{Timing Parameters}
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Start/End Times: specific time act as hard limits even when cost-based algorithms derive their own optimal horizons. Orders with insufficient time horizons may be rejected.\\
Defaults: start time = now (or market open), end time = market close. Timezone handling is critical for correct transmission and interpretation. Multi-day trading requires explicit end dates.
\item Duration: may be used instead of end times
\end{enumerate}
\end{remark}

\begin{remark} \hlt{Execution Control Parameters}
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Must-be-filled: ensure algorithm trades any residual amounts with specialised finish up logic (aggressive), which will affect overall cost/performance.
\item Execution Style: passive, aggressive or neutral trading. Aggressiveness is a function of both size and price, so an aggressive algorithm will often execute more quickly, but at a higher impact cost than a passive one.
\item Limit Price: offers price protection just as it would for a limit order.
\end{enumerate}
\end{remark}

\begin{remark} \hlt{Volume Constraint Parameters}
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Volume Limit (Maximum): prevents algorithm from trading more than a certain percent of the actual market volume. For preventing signalling risk, use minimal impact or liquidity-driven algorithm.
\item Volume Limit (Minimum): may have substantial effect on market impact costs.
\item Volume Limit (Child): limits on size of child orders, or number of orders that can be extant at any one time. For preventing signalling risk, use minimal impact or liquidity-driven algorithm.
\end{enumerate}
\end{remark}

\begin{remark} \hlt{Auction Participation}
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Auctions: flag to specify whether the order may participate in opening, closing and any intraday auctions. There may be parameters to state this as a percentage of the order size.
\end{enumerate}
\end{remark}

\subsubsection{Scheduled Algorithms}
% Time-based execution strategies
% - TWAP (Time Weighted Average Price)
%   - Equal time slicing
%   - Variance properties
%   - Use cases
% - VWAP (Volume Weighted Average Price)
%   - Volume profile estimation
%   - Participation rate implied
%   - Tracking error
% - POV (Percentage of Volume)
%   - Participation rate strategies
%   - Adaptive participation
% Sources: Johnson Ch.13; Lehalle Ch.9

Scheduled algorithms split large orders into smaller child orders to reduce market impact. TWAP and VWAP represent the first generation, tracking statically created trajectories based on their respective benchmarks with little sensitivity to market conditions. Their primary aim is complete execution within the given timeframe.

\begin{remark} \hlt{Time Weighted Average Price (TWAP)}
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Benchmark: average market price
\item Execution: based on a uniform time-based schedule, child orders are issued at regular intervals for equal sizes throughout the trading period. The idealised completion rate charts are straight lines.
\item Signalling Risk: other market participants only do not know total size of order. Potential poor execution quality when prices become unfavourable or available liquidity suddenly drops.
\item Randomised TWAP: approach tracks linear target completion profile. Algorithm vary both frequency and size of trades while maintaining overall schedule, reducing predictability and signalling risk, though execution may lag or lead the target at intermediate points.
\item Common Variations:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Aggressive/Passive Tilting:  aggressiveness issue more orders early, reducing timing risk. Passiveness result in lower market impact costs.
\item Price Adaptive: adjust schedule dynamically based on market price
\end{enumerate}
\item Special Parameters
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Tracking: controls how closely the algorithm tracks the target completion profile via on/off switches or limits (percentage/cash value) for schedule deviations. Inferred from execution style parameters.
\item Interval Frequency: controls trading frequency and whether randomisation is used to vary intervals.
\end{enumerate}
\end{enumerate}
\end{remark}

\begin{figure}[H]
\centering
\includegraphics[width=0.25\textwidth]{images/03_microstruct/simple_TWAP_completion_rate.png}
\includegraphics[width=0.25\textwidth]{images/03_microstruct/randomised_TWAP_completion_rate.png}
\includegraphics[width=0.25\textwidth]{images/03_microstruct/tilted_TWAP_completion_rate.png}
\caption{TWAP Completion Rates: simple uniform slicing, randomised, tilted aggressive/passive}
\label{fig:twap_completion_rates}
\end{figure}

\begin{remark} \hlt{Volume Weighted Average Price (VWAP)}\\
Volume-weighted average corresponding to overall turnover divided by total volume
\begin{equation}
VWAP = \left(\sum_n v_n p_n \right)/\left(\sum_n v_n\right) \nonumber
\end{equation}
where $v_n$ is the size and $p_n$ is the price of trade $n$.
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Benchmark: total traded value divided by total traded quantity. Reflects market conditions.
\item Execution: requires trading in proportions matching expected volume distribution. As intraday volume is unknown, historical volume profiles used. Optimal trading schedule is $x_j = u_j X$ where $u_j$ is percentage of daily volume traded at period $j$, $X$ is total order size.
\item Adaptive Variants: monitor current market conditions, creating a hybrid with dynamic volume participation. May also adjust to short-term price and volume trends.
\item Special Parameters:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Tracking: control over how closely algorithm tracks target completion profile via custom parameters or inferred from execution style.
\item Start/End Time: can be specified for specific interval; otherwise defaults to whole trading day.
\item Trending/Tilting: VWAP is acceptable benchmark when no specific price view exists. If price expected to trend, tilting target execution profile towards start or end may be expensive.
\end{enumerate}
\end{enumerate}
\end{remark}

\begin{figure}[H]
\centering
\includegraphics[width=0.25\textwidth]{images/03_microstruct/simple_VWAP_completion_rate.png}
\caption{VWAP Completion Rate}
\label{fig:simple_vwap}
\end{figure}

\begin{remark} \hlt{Percent of Volume (POV)}
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Execution: participate in market at a given rate in proportion with market volume. Completes as soon as the market volume allows, or at specified end time.
\item Market Impact Risk: multiple competing POV algorithms on illiquid assets can drive each other. Signalling risk is lower than uniform slicing since trading pattern varies with market conditions.
\item Variants:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Volume Forecasting: using historical profiles and current observed volume
\item Price Adaptive: adjust participation rate based on how current market price compares to a benchmark price, or relative price changes for other assets.
\item Corporate Buyback: strict timing, price, volume conditions per SEC Rule 10h-18 safe harbour provision, which protects issuers against liability for market manipulation.
\end{enumerate}
\item Special Parameters:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Participation Rate: specify percentage of observed market volume to match.
\item Tracking: Control over how closely algorithm tracks target participation rate
\item Volume Filters: prevent unnecessary chasing of volume by excluding or setting maximum trade size limits. May track from primary exchange, composite volume, or all venues.
\item Start/End Time: only track volume while active. End time as firm limit, completion not guaranteed.
\item Must-be-Filled: flag for $100\%$ completion, allowing trading style changes as time runs out.
\item Limit Price: ignore trades outside the limit.
\item Execution Style: passiveness for price improvement, aggressiveness to track participation more closely, especially for illiquid assets.
\end{enumerate}
\end{enumerate}
\end{remark}

\begin{figure}[H]
\centering
\includegraphics[width=0.25\textwidth]{images/03_microstruct/simple_POV_completion_rate.png}
\caption{POV Completion Rate}
\label{fig:simple_pov}
\end{figure}

\begin{remark} \hlt{Minimal Impact Algorithms}\\
Focus on minimising market impact. Leverage dark pool ATSs, broker crossing networks, and hidden order types to reduce signal leakage risk.
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Execution: simplest is to route entire order to dark pool ATS. As ATS fill rates can be low, split order by leaving most on ATS, trade remainder using passive VWAP or POV, or even liquidity-driven algorithm. 
\item Variants:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item ATS Fill Models: estimate probability of ATS fills to determine optimal order allocation.
\item Impact Cost Models: forecast potential costs to use as benchmarks or compare against alternatives.
\item Stealth-Based Approaches: reduce impact via similar logic to liquidity-driven algorithms.
\end{enumerate}
\item Special Parameters:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Visibility: controls how much of order is displayed at execution venues. No visibility means dark pool only; low visibility uses hidden order types or IOCs at other venues.
\item Must-be-Filled: focused solely on reducing impact cost at risk of incomplete execution. A requirement for full fill may make a cost-based algorithm more appropriate.
\end{enumerate}
\end{enumerate}
\end{remark}

\begin{figure}[H]
\centering
\includegraphics[width=0.25\textwidth]{images/03_microstruct/simple_minimal_impact_completion_rate.png}
\caption{Minimal Impact Algorithm Completion Rate}
\label{fig:minimal_impact}
\end{figure}

\subsubsection{Cost-Driven Algorithms}
% Cost-minimization strategies
% - Front-loaded schedules
% - Risk-adjusted optimization
% - Parameter sensitivity
% - Real-time adaptation
% Sources: Johnson Ch.14; Cartea Ch.7

Cost-driven algorithms seek to reduce overall transaction costs, which includes commissions, spreads, and other implicit costs such as market impact and timing risk.

\begin{figure}[H]
\centering
\includegraphics[width=0.50\textwidth]{images/03_microstruct/trading_strategy_costs.png}
\caption{Trading Strategy Cost Tradeoffs}
\label{fig:trading_strategy_costs}
\end{figure}

\begin{remark} \hlt{Implementation Shortfall (IS) Algorithm}\\
Determine an optimal trading horizon that balances market impact against timing risk.
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Execution Approaches:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Model-Based: optimal trading horizons (model-determined end times, optimal participation rates)
\item Ground-Up Designs: built from scratch to react opportunistically to market price, liquidity changes
\item Hybrid: enhanced versions of VWAP or POV algorithms with cost optimisation overlays
\end{enumerate}
\item Time Horizon Determinants: shorter trade horizon appropriate when assets have high volatility or low bid-offer spreads, investor has high risk aversion, order size is relatively small.\\
Quantitative models incorporate these factors along with order size, available trading time, asset liquidity and volatility, and investor urgency to derive the optimal trade horizon.
\item Static Implementation Shortfall: conceptually similar to a tilted VWAP algorithm, uses a historical volume profile with the optimal end time to determine target percentages for each trading interval.
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Trading Profile Construction: historical volume information is scaled to optimal time window, generating new target percentages for each interval
\item Tilt Factor Application: an additional weighting is applied to increase trading at the order start, reducing timing risk without excessive market impact
\item Result: aggressive execution early, with trading gradually declining as market volumes decrease
\end{enumerate}
\item Dynamic Implementation Shortfall: bases trading pattern on inline participation with market volume, conceptually similar to a tilted POV algorithm
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Participation Rate Calculation: using historical volume profile and end time, calculate expected total market volume by end time. Optimal participation rate is then $\text{order size} / \text{expected market volume}$
\item Dynamic Adjustment: apply tilt factor that starts with positive adjustment and decreases over time
\item Adaptability: responds to actual market volume rather than pre-determined schedules, finishing earlier when market volume exceeds historical estimates
\end{enumerate}
\item Variants: See Adaptive Shortfall and Market-on-Close subsections below
\end{enumerate}
\item Special Parameters:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Benchmark Price: specifies decision price; otherwise defaults to arrival price (midpoint) when the order was received. The IS algorithm optimises execution relative to this benchmark.
\item Risk Aversion: higher risk aversion triggers shorter time horizon with more aggressive execution tactics. Some algorithms support discrete settings (passive, neutral, aggressive) while others allow fine-grained settings (e.g., 1 to 10 scale).
\item Execution Style: replaced by or derived from Risk Aversion setting, though some variants maintain separate controls. Affects how aggressively algorithm pursues the completion schedule.
\item End Time: absolute deadline for order completion. IS algorithms derive optimal trading horizons, to verify with pre-trade analytics that specified end time does not fall before calculated optimal time.
\item Limit Prices: for price protection. IS algorithms are optimised to work toward benchmark (arrival price), so limit prices outside this logic may negatively impact performance.
\item Volume Limits: IS algorithms typically start by trading fairly aggressively to minimise timing risk, with internal models balancing market impact against this risk. Overly stringent volume limits can impair algorithm performance. If intent is to reduce signalling risk, a minimal impact or liquidity-driven algorithm may be more appropriate.
\end{enumerate}
\end{remark}

\begin{remark} \hlt{Adaptive Shortfall (AS) Algorithms}\\
Algorithm class is derived from implementation shortfall, with addition of adaptive behaviour (reaction to market price). Effectively, price adaptive shortfall algorithms behave more opportunistically.
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Basic Mechanism: an implementation shortfall algorithm, basic behaviour follows IS approach. In addition, the algorithm dynamically adapts to market conditions. Effectively, this is like having a tilt function that adjusts in real-time based on current market conditions.
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item A baseline target for volume participation is determined based on estimated optimal trade horizon
\item During trading, the adaptive portion is then used to modify this rate based on market conditions
\end{enumerate}
\item Price Adaptation Strategies: 
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Aggressive In-the-Money (AIM): more aggressively with favourable prices and less when they become adverse. Assumes trends are short-lived and will soon revert.
\item Passive In-the-Money (PIM): more passive when prices are favourable. Relies on trend persisting, react aggressively to stem losses from unfavourable trends, but passively during favourable trends.
\item Target Strategy: Similar to price inline algorithm, since it does not account for timing risk, which is covered in the following subsection
\end{enumerate}
AIM achieves better prices but at slightly higher risk, PIM quicker to cut losses achieving slightly lower risk but may achieve poorer prices than AIM.
\item Liquidity and Order Book Adaptations: can also add behaviour reacting to changes in order book depth or overall liquidity measures. Increasingly accessing liquidity from dark pool ATSs
\item Special Parameters:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Adaptation Type: Either Aggressive In-the-Money (AIM) or Passive In-the-Money (PIM)
\item Other parameters: same as implementation shortfall algorithms
\end{enumerate}
\end{enumerate}
\end{remark}

\begin{remark} \hlt{Market-on-Close (MOC) Algorithms}\\
Prices are more sensitive to order flows at the close. 
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Benchmark: close price for mark to market and calculating net asset values, daily returns/profit and loss.
\item Basic Mechanism: benchmark is unknown until end of trading day. If start trading too early, exposed to timing risk due to variability in closing price. If start too late, may cause significant market impact.
\item Optimal Trading Horizon: determined using quantitative models, which incorporate estimates of volatility and trading volume to calculate an optimal start time.\\
Constantly monitor market volume and adjust participation rate accordingly, similar to passive in-the-money adaptive shortfall algorithm.
\item Departure Price Algorithms: more generic mechanism which will trade to any given end time. i.e., to ensure position is achieved by midday, set end time accordingly, let algorithm find optimal start time.
\item Special Parameters:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Risk Aversion: high risk aversion signifies trade is more subject to price risk and should be traded more quickly, meaning optimal start time closer to market close. If there is genuine price risk, use a shortfall algorithm rather than market close.
\item End Time: allow control over end time, giving a much more flexible approach
\item Auction Participation: minimum and/or maximum order size allowed to participate in close auction
\end{enumerate}
\end{enumerate}
\end{remark}

\begin{figure}[H]
\centering
\includegraphics[width=0.25\textwidth]{images/03_microstruct/IS_completion_rate.png}
\includegraphics[width=0.25\textwidth]{images/03_microstruct/AS_completion_rate.png}
\includegraphics[width=0.25\textwidth]{images/03_microstruct/MC_completion_rate.png}
\caption{Completion Rates: Implementation Shortfall, Adaptive Shortfall, Market-on-Close}
\label{fig:is_completion_rates}
\end{figure}


\subsubsection{Opportunistic Algorithms}
% Liquidity-seeking strategies
% - Liquidity aggregation
% - Dark pool routing
% - Pegging strategies
% - Adaptive algorithms
% Sources: Johnson Ch.15; Lehalle Ch.9

Opportunistic algorithms take advantage of favourable market conditions (i.e., price, liquidity etc).

\begin{remark} \hlt{Price Inline (PI) Algorithms}\\
Adapts trading to market price similarly to how POV algorithms adjust to market volume.
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Benchmark: if is defined, trading is altered based on how market price compares to this. If no benchmark specified, then mid price when order arrives is typically used instead.
\item Price Adaptation: aggressive in-the-money (AIM), passive in-the-money (PIM) strategies (refer to AS)
\item Basic Mechanism: consists of basic trading mechanism combined with price adaptive functionality. Price adaptation directly track difference between market price and benchmark, or even other factors.
\item Common Variations: price adaptation based on price of other assets, sectors, market indices or even ETFs
\item Special Parameters:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Adaptation Type: Either aggressive in-the-money (AIM) or passive in-the-money (PIM)
\item Benchmark Price: if related to another asset, index or ETF, details will need to be provided to allow algorithm to make a real-time price subscription
\item Participation Rate: if based on dynamic POV type mechanism, baseline participation rate needed
\item Participation Adjustment: how much to alter participation rate by for a given price move
\item Price Levels: size of price moves for participation adjustments
\end{enumerate}
\end{enumerate}
\end{remark}

\begin{figure}[H]
\centering
\includegraphics[width=0.25\textwidth]{images/03_microstruct/PI_target_participation_rate.png}
\includegraphics[width=0.25\textwidth]{images/03_microstruct/PI_completion_rate.png}
\caption{Price Inline Algorithm Target Participation Rate and Completion Rate}
\label{fig:pi_completion_rates}
\end{figure}

\begin{remark} \hlt{Liquidity-Driven Algorithms}\\
Finding liquidity is an important means of reducing costs, particularly for illiquid assets.
\begin{enumerate}[label=\roman*.]
\setlength{\itemsep}{0pt}
\item Evolution: originally meant making decisions based on available order book depth. Today, due to fragmented markets, liquidity aggregation has become an important tool.
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Multi-broker systems pooled dealer quotes: gather as much order book data as possible from every venue and aggregate results into a virtual order book
\item Virtual Order Book: orders from primary exchange and several electronic crossing networks (ECNs) and dark pool alternative trading systems (ATSs)
\item Liquidity Aggregation: summing available orders at each price point across all different venues. For assets such as futures or options, account for liquidity implied from more complex spread strategies.
\item Venue Considerations: venues have own fee structures, need to consider this when comparing prices. Latency could significantly reduce the probability of execution.
\end{enumerate}
\item Execution Probability: execution not guaranteed when choosing between venues. To track probability of execution, based on factors including cancellation probability, latency and historical results.
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Hidden Liquidity: probability based on likelihood of hidden volume at that price.
\item Order Book Aggregation: orders aggregated into a virtual order book with priority based on price then probability. Preference given to venues with best price and highest execution probability.
\item Hidden Volume Tracking: continually track reported trades and match to order book state. Trades at better prices than shown may indicate hidden liquidity. Tracking enable prediction of hidden sizes.
\end{enumerate}
\item Basic Mechanism: liquidity is closely related to market depth and price. Algorithm react strongest when there is market depth and favourable price. Reasonably similar to aggressive in-the-money style trading.\\
Create market depth measure that reflects notional volume available at a favourable price point. If price and market depth favourable, trade aggressively to consume liquidity. Higher level of participation may be achieved by spreading the execution across a wide range of venues. May reduce participation when the price becomes unfavourable, much like a price inline algorithm
\item Completion Risk: order does not fully complete due to price becoming unfavourable, since there was sufficient liquidity. In practice, brokers may well offer versions that support a base level of participation or finish-up logic to help ensure the order executes fully.
\item Signalling Risk: for illiquid assets, even small order can result in price shifting away as other traders try to second-guess requirements. To counter this, adopt a similar strategy of using immediate-or-cancel style (IOC) orders. When liquidity becomes available an aggressive order is used to cross with it (sniping). In order to leave the best price unaffected, some strategies only take orders available one tick size down. Alternatively, hidden orders may be used, either iceberg orders or discretionary orders, although these will leave a certain display size on the order book..
\item Asset Suitability: intended for more illiquid assets and fragmented markets, where signalling risk is more important concern and more of the liquidity is hidden. Hence, tactics such as seeking and sniping using IOC type orders become important.
\item Common Variations: specific venue participation only, i.e., dark pool ATSs. Orders may not be included in broker's internalisation stream. 
\item Special Parameters:
\begin{enumerate}[label=\arabic*.]
\setlength{\itemsep}{0pt}
\item Visibility: low visibility implies hidden order types or IOC orders should be used, or the order is only worked in dark pool ATSs. Higher visibility may be used to leave orders exposed, trying to encourage trading for illiquid assets.
\item Benchmark Price: used to decide whether the price is favourable enough to warrant participation
\end{enumerate}
\end{enumerate}
\end{remark}

\begin{figure}[H]
\centering
\includegraphics[width=0.25\textwidth]{images/03_microstruct/LS_target_participation_rate.png}
\includegraphics[width=0.25\textwidth]{images/03_microstruct/LS_completion_rate.png}
\caption{Liquidity Seeking Algorithm Target Participation Rate and Completion Rate}
\label{fig:ls_completion_rates}
\end{figure}

\subsubsection{Smart Order Routing (SOR)}
% Venue selection and routing
% - Best execution requirements
% - Venue analysis
% - Routing logic
% - Latency considerations
% - IOC sweeps vs. resting orders
% Sources: Johnson Ch.15; Lehalle Ch.9

\subsubsection{Algorithm Selection}
% Choosing the right algorithm
% - Order characteristics
% - Market conditions
% - Performance benchmarks
% - Algorithm switching
% Sources: Johnson Ch.15; Lehalle Ch.9
